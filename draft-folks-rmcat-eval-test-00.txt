



RMCAT WG                                                        V. Singh
Internet-Draft                                          Aalto University
Intended status: Informational                                 Z. Sarker
Expires: April 26, 2014                                         Ericsson
                                                                  X. Zhu
                                                           M. A. Ramalho
                                                           Cisco Systems
                                                        October 23, 2013


     Evaluating Congestion Control for Interactive Real-time Media
                     draft-folks-rmcat-eval-test-00

Abstract

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 26, 2014.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents



Singh, et al.            Expires April 26, 2014                 [Page 1]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013



   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Proposal to evaluate      Self-fairness of RMCAT congestion
       control algorithm . . . . . . . . . . . . . . . . . . . . . .   2
     3.1.  Evaluation Parameters . . . . . . . . . . . . . . . . . .   4
       3.1.1.  Media Traffic Generator . . . . . . . . . . . . . . .   4
       3.1.2.  Bottleneck Link Bandwidth . . . . . . . . . . . . . .   4
       3.1.3.  Bottleneck Link Queue Type and Length . . . . . . . .   4
       3.1.4.  RMCAT flows and delay legs  . . . . . . . . . . . . .   5
       3.1.5.  Impairment Generator  . . . . . . . . . . . . . . . .   5
     3.2.  Proposed Passing Criteria . . . . . . . . . . . . . . . .   6
     3.3.  Extensibility of the Experiment . . . . . . . . . . . . .   6
   4.  Evaluation Parameters . . . . . . . . . . . . . . . . . . . .   6
     4.1.  Bottleneck Traffic Flows  . . . . . . . . . . . . . . . .   6
     4.2.  Access Links  . . . . . . . . . . . . . . . . . . . . . .   7
     4.3.  Example Bottleneck Link Parameters  . . . . . . . . . . .   8
     4.4.  DropTail Router Queue Parameters  . . . . . . . . . . . .   9
     4.5.  Media Flow Parameters . . . . . . . . . . . . . . . . . .   9
     4.6.  Cross-traffic Parameters  . . . . . . . . . . . . . . . .  10
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  10
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  10
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  10
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  10
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .  10
     8.2.  Informative References  . . . . . . . . . . . . . . . . .  11
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  11

1.  Introduction

2.  Terminology

   The terminology defined in RTP [RFC3550], RTP Profile for Audio and
   Video Conferences with Minimal Control [RFC3551], RTCP Extended
   Report (XR) [RFC3611], Extended RTP Profile for RTCP-based Feedback
   (RTP/AVPF) [RFC4585] and Support for Reduced-Size RTCP [RFC5506]
   apply.

3.  Proposal to evaluate Self-fairness of RMCAT congestion control
    algorithm

   The goal of the experiment discussed in this section is to initially
   take out as many unknowns from the scenario.  Later experiments can
   define more complex environments, topologies and media behavior.
   This experiment evaluates the performance of the RMCAT sender
   competing with other similar RMCAT flows (running the same algorithm
   or other RMCAT proposals) on the bottleneck link.  There are up to 20
   RMCAT flows competing for capacity, but the media only flows in one



Singh, et al.            Expires April 26, 2014                 [Page 2]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   direction, from senders (S1..S20) to receivers (R1..R20) and the
   feedback packets flow in the reverse direction.

   Figure 1 shows the experiment setup and it has subtle differences
   compared to the simple topology in Figure 2.  Groups of 10 receivers
   are connected to the bottleneck link through two different routers
   (Router C and D).  The rationale for adding these additional routers
   is to create two delay legs, i.e., two groups of endpoints with
   different network latencies and measure the performance of the RMCAT
   congestion control algorithm.  If fewer than 10 sources are
   initialized, all traffic flows experience the same delay because they
   share the same delay leg.

   Router A has a single forward direction bottleneck link (i.e., the
   bottleneck capacity and delay constraints applies only to the media
   packets going from the sender to the receiver, the feedback packets
   are unaffected).  Hence, the Round-Trip Time (RTT) is primarily
   composed of the bottleneck queue delay and any forward path
   (propagation) latency.  The main reason for not applying any
   constraints on the return path is to provide the best-case
   performance scenario for the congestion control algorithm.  In later
   experiments, it is possible to add similar capacity and delay
   constraints on the return path.

                                                               +---+
                                                         / === |R1 |
   +---+                                           +-----+  //     +---+
   |S1 |======= \                               / =|  C  | //
   +---+        \\                             //  +-----+ \\      (...)
             \\                           //            \\
   +---+       +-----+      Bottleneck     +-----+           \\    +---+
   |S2 |=======|  A  |-------------------->|  B  |            \ ===|R10|
   +---+       |     |<--------------------|     |                 +---+
           +-----+        Link         +-----+
   (...)         //                           \\                   +---+
            //                             \\            / === |R11|
   +---+       //                               \\  +-----+ //     +---+
   |S20|====== /                                 \ =|  D  |//
   +---+                                            +-----+\\      (...)
                                                        \\
                                                         \\    +---+
                                                          \ ===|R20|
                                                               +---+

                 Figure 1: Self-fairness Evaluation Setup

   Loss impairments are applied at Router C and Router D, but only to
   the feedback flows.  If the losses are set to 0%, it represents a



Singh, et al.            Expires April 26, 2014                 [Page 3]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   case where the return path is over-provisioned for all traffic.  In
   later experiments the loss impairments can be added to the media path
   as well.

   The media sources are configured to send infinite amount of data,
   i.e., the sources always have data to send and have no data limited
   intervals.  Additionally, the media sources are always successful in
   generating the media rate requested by the RMCAT congestion control
   algorithm.  In this experiment, we avoid the potentially complicated
   scenario of using media traffic generators that try to model the
   behavior of media codecs (mainly the burstiness).

3.1.  Evaluation Parameters

3.1.1.  Media Traffic Generator

   The media source always generates at the rate requested by the
   congestion control and has infinite data to send.  Furthermore, the
   media packet generator is subject to the following constraints:

   1.  It MUST emit a packet at least once per 100 ms time interval.

   2.  For low media rate source: when generating data at a rate less
       than a maximum length MTU every 100 ms would allow (e.g., 120
       kbps = 1500 bytes/packet * 10 packets/sec * 8 bits/byte), the
       RMCAT source must modulate the packet size (RTP payload size) of
       RTP packets that are sent every 100 ms to attain the desired
       rate.

   3.  For high media rate sources: when generating data at a rate
       greater than a maximum length MTU every 100 ms would allow, the
       source must do so by sending (approximately) maximum MTU sized
       packets and adjusting the inter-departure interval to be
       approximately equal.  The intent of this to ensure the data is
       sent relatively smoothly independent of the bit rate, subject to
       the first constraint.

3.1.2.  Bottleneck Link Bandwidth

   The bottleneck link capacity is dimensioned such that each RMCAT flow
   in an ideal situation with perfectly equal capacity sharing for all
   the flows on the bottleneck obtains the following throughputs: 200
   kbps, 800 kbps, 1.3 Mbps and 4 Mbps.
   For example, experiments with five RMCAT flows with an 800 kbps/flow
   target rate should set the bottleneck link capacity to 4 Mbps.

3.1.3.  Bottleneck Link Queue Type and Length




Singh, et al.            Expires April 26, 2014                 [Page 4]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   The bottleneck link queue (Router A) is a simple FIFO queue having a
   buffer length corresponding to 70 ms, 500 ms or 2000 ms (defined in
   Section 4.4) of delay at the bottleneck link rate (i.e., actual
   buffer lengths in bytes are dependent on bottleneck link bandwidth).

3.1.4.  RMCAT flows and delay legs

   Experiments run with 1, 3, 5, 10 and 20 RMCAT sources, they are
   outlined as follows:

   1.  Experiments with 1, 3, and 5 RMCAT flows, all RMCAT flows
       commence simultaneously.  A single delay leg is used and the link
       latency is set to one of the following : 0 ms, 50 ms and 150 ms.

   2.  For 10 and 20 source experiments where all RMCAT flows begin
       simultaneously the sources are split evenly into two different
       bulk delay legs.  One leg is set to 0 ms bulk delay leg and the
       other is set to 150 ms.

   3.  For 10 and 20 source experiments where the first set will use 0
       ms of bulk delay and the second set will use 150 ms bulk delay.

       1.  Random starts within interval [0 ms, 500 ms].

       2.  One "early-coming" flow (i.e., the 1st flow starting and
           achieving steady-state before the next N-1 simultaneously
           begin).

       3.  One "late-coming" flow (i.e., the Nth flow starting after
           steady-state has occurred for the existing N-1 flows).

       These cases assess if there are any early or late-comer
       advantages or disadvantages for a particular algorithm and to see
       if any unfairness is reproducible or unpredictable.

   [Open issue (A.1): which group does the early and late flow belong
   to?]

   [Open issue (A.2): Start rate for the media flows]

3.1.5.  Impairment Generator

   Packet loss is created in the reverse path (affects only feedback
   packets).  Cases of 0%, 1%, 5% and 10% are studied for the 1, 3, and
   5 RMCAT flow experiments, losses are not applied to flows with 10 or
   20 RMCAT flows.





Singh, et al.            Expires April 26, 2014                 [Page 5]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


3.2.  Proposed Passing Criteria

   [Editor's note: there has been little or no discussion on the below
   criteria, however, they are listed here for the sake of completeness.

   No unfairness is observed, i.e., at steady state each flow attains a
   throughput between [ B/(3*N), (3*B)/N ], where B is the link
   bandwidth and N is the number of flows.

   No flow experiences packet loss when queue length is set to 500 ms or
   greater.

   All individual sources must be in their steady state within twenty
   LRTTs (where LRTT is defined as the RTT associated with the flow with
   the Largest RTT in the experiment).  ]

3.3.  Extensibility of the Experiment

   The above scenario describes only RMCAT sources competing for
   capacity on the bottleneck link, however, future experiments can use
   different types of cross-traffic (as described in Section 4.1).

   Currently, the forward path (carrying media packets) is characterized
   to add delay and a fixed bottleneck link capacity, in the future
   packet losses and capacity changes can be applied to mimic a wireless
   link layer (for e.g., WiFi, 3G, LTE).  Additionally, only losses are
   applied to the reverse path (carrying feedback packets), later
   experiments can apply the same forward path (carrying media packets)
   impairments to the reverse path.

4.  Evaluation Parameters

   An evaluation scenario is created from a list of network, link and
   flow characteristics.  The example parameters discussed in the
   following subsections are meant to aid in creating evaluation
   scenarios and do not describe an evaluation scenario.  The scenario
   discussed in Section 3 takes into account all these parameters.

4.1.  Bottleneck Traffic Flows

   The network scenario describes the types of flows sharing the common
   bottleneck with a single RMCAT flow, they are:

   1.  A single RMCAT flow by itself.

   2.  Competing with similar RMCAT flows.  These competing flows may
       use the same algorithm or another candidate RMCAT algorithm.




Singh, et al.            Expires April 26, 2014                 [Page 6]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   3.  Compete with long-lived TCP.

   4.  Compete with bursty TCP.

   5.  Compete with LEDBAT flows.

   6.  Compete with unresponsive interactive media flows (i.e., not only
       CBR).

   Figure 2 shows an example evaluation topology, where S1..Sn are
   traffic sources, these sources are either RMCAT or a mixture of
   traffic flows listed above.  R1..Rn are the corresponding receivers.
   A and B are routers that can be configured to introduce impairments.
   Access links are in between the sender/receiver and the router, while
   the bottleneck link is between the Routers A and B.

   +---+  Access                                            Access +---+
   |S1 |======= \                                         / =======|R1 |
   +---+   link \\                                       //  link  +---+
             \\                                     //
   +---+       +-----+         Bottleneck            +-----+       +---+
   |S2 |=======|  A  |------------------------------>|  B  |=======|R2 |
   +---+       |     |<------------------------------|     |       +---+
           +-----+           Link                +-----+
   (...)         //                                     \\         (...)
            //                                       \\
   +---+       //                                         \\       +---+
   |Sn |====== /                                           \ ======|Rn |
   +---+                                                           +---+

                         Figure 2: Simple Topology

   [Open Issue: Discuss more complex topologies]

4.2.  Access Links

   The media senders and receivers are typically connected to the
   bottleneck link, common access links are:

   1.  Ethernet (LAN)

   2.  Wireless LAN (WLAN)

   3.  3G/LTE

   [Open issue: point to a reference containing parameters or traces to
   model WLAN and 3G/LTE.]




Singh, et al.            Expires April 26, 2014                 [Page 7]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   A real-world network typically consists of a mixture of links, the
   most important aspect is to identify the location of the bottleneck
   link.  The bottleneck link can move from one node to another
   depending on the amount of cross-traffic or due to the varying link
   capacity.  The design of the experiments should take this into
   account.  In the simplest case the access link may not be the
   bottleneck link but an intermediate node.

4.3.  Example Bottleneck Link Parameters

   The bottleneck link carries multiple flows, these flows may be other
   RMCAT flows or other types of cross-traffic.  The experiments should
   dimension the bottleneck link based on the number of flows and the
   expected behavior.  For example, if 5 media flows are expected to
   share the bottleneck link equally, the bottleneck link is set to 5
   times the desired transmission rate.

   If the experiment carries only media in one direction, then the
   upstream (sender to receiver) bottleneck link carries media packets
   while the downstream (receiver to sender) bottleneck carries the
   feedback packets.  The bottleneck link parameters discussed in this
   section apply only to a single direction, hence the bottleneck link
   in the reverse direction can choose the same or have different
   parameters.

   The link latency corresponds to the propagation delay of the link,
   i.e., the time it takes for a packet to traverse the bottleneck link,
   it does not include queuing delay.  In an experiment with several
   links the experiment should describe if the links add latency or not.
   It is possible for experiments to have multiple hops with different
   link latencies.  Experiments are expected to verify that the
   congestion control is able to work in challenging situations, for
   example over trans-continental and/or satellite links.  The
   experiment should pick link latency values from the following:

   1.  Very low latency: 0-1ms

   2.  Low latency: 50ms

   3.  High latency: 150ms

   4.  Extreme latency: 300ms

   Similarly, to model lossy links, the experiments can choose one of
   the following loss rates, the fractional loss is the ratio of packets
   lost and packets sent.

   1.  no loss: 0%



Singh, et al.            Expires April 26, 2014                 [Page 8]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   2.  1%

   3.  5%

   4.  10%

   5.  20%

   These fractional losses can be generated using traces, Gilbert-Elliot
   model, randomly (uncorrelated) loss.

4.4.  DropTail Router Queue Parameters

   The router queue length is measured as the time taken to drain the
   FIFO queue, they are:

   1.  QoS-aware (or short): 70ms

   2.  Nominal: 500ms

   3.  Buffer-bloated: 2000ms

   However, the size of the queue is typically measured in bytes or
   packets and to convert the queue length measured in seconds to queue
   length in bytes:

   QueueSize (in bytes) = QueueSize (in sec) x Throughput (in bps)/8

4.5.  Media Flow Parameters

   The media sources can be modeled in two ways.  In the first, the
   sources always have data to send, i.e., have no data limited
   intervals and are able to generate the media rate requested by the
   RMCAT congestion control algorithm.  In the second, the traffic
   generator models the behavior of a media codec, mainly the burstiness
   (time-varying data produced by a video GOP).

   At the beginning of the session, the media sources are configured to
   start at a given start rate, they are:

   1.  200 kbps

   2.  800 kbps

   3.  1300 kbps

   4.  4000 kbps




Singh, et al.            Expires April 26, 2014                 [Page 9]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


4.6.  Cross-traffic Parameters

   Long-lived TCP flows will download data throughout the session and
   are expected to have infinite amount of data to send or receive.

   [Open issue: short-lived/bursty TCP cross-traffic parameters are
   still TBD.

5.  Security Considerations

   Security issues have not been discussed in this memo.

6.  IANA Considerations

   There are no IANA impacts in this memo.

7.  Acknowledgements

   Much of this document is derived from previous work on congestion
   control at the IETF.

   The content and concepts within this document are a product of the
   discussion carried out in the Design Team.

8.  References

8.1.  Normative References

   [RFC3550]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, RFC 3550, July 2003.

   [RFC3551]  Schulzrinne, H. and S. Casner, "RTP Profile for Audio and
              Video Conferences with Minimal Control", STD 65, RFC 3551,
              July 2003.

   [RFC3611]  Friedman, T., Caceres, R., and A. Clark, "RTP Control
              Protocol Extended Reports (RTCP XR)", RFC 3611, November
              2003.

   [RFC4585]  Ott, J., Wenger, S., Sato, N., Burmeister, C., and J. Rey,
              "Extended RTP Profile for Real-time Transport Control
              Protocol (RTCP)-Based Feedback (RTP/AVPF)", RFC 4585, July
              2006.

   [RFC5506]  Johansson, I. and M. Westerlund, "Support for Reduced-Size
              Real-Time Transport Control Protocol (RTCP): Opportunities
              and Consequences", RFC 5506, April 2009.



Singh, et al.            Expires April 26, 2014                [Page 10]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   [I-D.ietf-rmcat-cc-requirements]
              Jesup, R., "Congestion Control Requirements For RMCAT",
              draft-ietf-rmcat-cc-requirements-00 (work in progress),
              July 2013.

   [I-D.ietf-avtcore-rtp-circuit-breakers]
              Perkins, C. and V. Singh, "RTP Congestion Control: Circuit
              Breakers for Unicast Sessions", draft-ietf-avtcore-rtp-
              circuit-breakers-01 (work in progress), October 2012.

   [I-D.singh-rmcat-cc-eval]
              Singh, V. and J. Ott, "Evaluating Congestion Control for
              Interactive Real-time Media", draft-singh-rmcat-cc-eval-04
              (work in progress), October 2013.

8.2.  Informative References

   [RFC5033]  Floyd, S. and M. Allman, "Specifying New Congestion
              Control Algorithms", BCP 133, RFC 5033, August 2007.

   [RFC5166]  Floyd, S., "Metrics for the Evaluation of Congestion
              Control Mechanisms", RFC 5166, March 2008.

   [RFC5681]  Allman, M., Paxson, V., and E. Blanton, "TCP Congestion
              Control", RFC 5681, September 2009.

   [SA4-EVAL]
              R1-081955, 3GPP., "LTE Link Level Throughput Data for SA4
              Evaluation Framework", 3GPP R1-081955, 5 2008.

   [SA4-LR]   S4-050560, 3GPP., "Error Patterns for MBMS Streaming over
              UTRAN and GERAN", 3GPP S4-050560, 5 2008.

   [TCP-eval-suite]
              Lachlan, A., Marcondes, C., Floyd, S., Dunn, L., Guillier,
              R., Gang, W., Eggert, L., Ha, S., and I. Rhee, "Towards a
              Common TCP Evaluation Suite", Proc. PFLDnet. 2008, August
              2008.

Authors' Addresses











Singh, et al.            Expires April 26, 2014                [Page 11]

Internet-Draft  Evaluating Congestion Control for RMCAT     October 2013


   Varun Singh
   Aalto University
   School of Electrical Engineering
   Otakaari 5 A
   Espoo, FIN  02150
   Finland

   Email: varun@comnet.tkk.fi
   URI:   http://www.netlab.tkk.fi/~varun/


   Zaheduzzaman Sarker
   Ericsson
   Lulea, SE  971 28
   Sweden

   Phone: +46 10 717 37 43
   Email: zaheduzzaman.sarker@ericsson.com


    Xiaoqing Zhu
   Cisco Systems
   510 McCarthy Blvd
   Milpitas, CA  95134
   USA

   Email: xiaoqzhu@cisco.com


   Michael A. Ramalho
   Cisco Systems, Inc.
   8000 Hawkins Road
   Sarasota, FL  34241
   USA

   Phone: +1 919 476 2038
   Email: mramalho@cisco.com













Singh, et al.            Expires April 26, 2014                [Page 12]
